<form method="post" id="product-form" class="mt20" action="{% if model.id %}{{ 'pos/products/update' | link }}/{{ model.id }}{% else %}{{ 'pos/products/create' | link }}{% endif %}">
    <div class="alert alert-success" style="display: none;"></div>
    <div class="col-md-12">
        <p>Kolom bertanda <span class="red">*</span> tidak boleh dikosongi</p>
    </div>

    <div class="form-group col-md-4">
        <label class="control-label" for="ProductPrice_purchase_date">Tanggal Pengadaan</label>
        <input class="form-control hasDatepicker" value="2015-05-14" id="ProductPrice_purchase_date" name="ProductPrice[purchase_date]" type="text">
    </div>
    <div class="form-group col-md-4">
        <label class="control-label" for="ProductPrice_purchase_price">Harga Pembelian / Ongkos Produksi</label>
        <input class="form-control" name="ProductPrice[purchase_price]" id="ProductPrice_purchase_price" value="1500" type="text">
    </div>
    <div class="form-group col-md-4">
        <label class="control-label" for="ProductPrice_purchase_stock">Jumlah Pengadaan</label>
        <input class="form-control" name="ProductPrice[purchase_stock]" id="ProductPrice_purchase_stock" value="100" type="text">
    </div>
    <div class="form-group col-md-4">
        <label class="control-label" for="ProductPrice_current_stock">Current Stock</label>
        <input class="form-control" name="ProductPrice[current_stock]" id="ProductPrice_current_stock" value="100" type="text">
    </div>
    <div class="form-group col-md-4">
        <label class="control-label required" for="ProductPrice_sold_price">Harga Jual <span class="required">*</span></label>
        <input class="form-control" name="ProductPrice[sold_price]" id="ProductPrice_sold_price" value="2500" type="text">
    </div>

    <div class="form-group col-md-12">
        <input type="submit" value="Simpan" class="btn btn-info">
    </div>
</form>

<script type="text/javascript">
    $(function () {
        $('#product-form').submit(function () {
            var url = $(this).attr('action');
            $.ajax({
                'url': url,
                'type':'post',
                'data': $('#product-form').serialize(),
                'success': function(data) {
                    if (data.status == 'success') {
                        var alert_success = $('#product-form').find('.alert-success');
                        alert_success.html(data.message);
                        alert_success.show();
                        setTimeout(function () {
                            if (data.updated == true) {
                                window.location.reload(true);
                            } else {
                                alert_success.hide();
                                alert_success.empty();
                                $('#product-form')[0].reset();
                            }
                        }, 5000);
                    }
                }
            });

            return false;
        });
    });
</script>