/*!
 * Material Modal v0.1.3
 * Copyright 2015-2018 Mark Rabey <mark@markrabey.com> (markrabey.com)
 * Licensed under the MIT license
 */

for(var MaterialModal=function(t){this.trigger=t,this.initModal=function(){var t=this.trigger.dataset.modal,i=t.length,e=t.substring(1,i),s=document.getElementById(e);if(s)this.modal=s,this.setElements(),this.bindActions();else if(this.trigger.dataset.hasOwnProperty("modalSrc")){var n=new XMLHttpRequest;n.onreadystatechange=function(){var t;4==n.readyState&&200==n.status&&(this.trigger.dataset.hasOwnProperty("modalTarget")?(t=document.querySelector(this.trigger.dataset.modalTarget))||console.error("Invalid modal-target property on this.trigger"):(t=document.createElement("div"),document.body.appendChild(t)),t.innerHTML=n.responseText,(s=document.getElementById(e))?(this.modal=s,this.setElements(),this.bindActions()):console.error("No modal corresponding to this.trigger in loaded content"))}.bind(this),n.open("GET",this.trigger.dataset.modalSrc,!0),n.send()}else console.error("Missing modal and no modal-src for async loading")},this.setElements=function(){this.content=this.modal.querySelector(".modal__content"),this.closers=this.modal.querySelector(".modal__close"),this.modalsbg=this.modal.querySelector(".modal__bg"),this.modalsbg||(this.modalsbg=[]),/modal__bg/.test(this.modal.className)&&this.modalsbg.push(this.modal)},this.bindActions=function(){this.trigger.addEventListener("click",this.open.bind(this),!1);for(var t=0;t<this.closers.length;t++)this.closers[t].addEventListener("click",this.close.bind(this),!1);for(var i=0;i<this.modalsbg.length;i++)this.modalsbg[i].addEventListener("click",this.close.bind(this),!1)},this.close=function(t){var i=t.target,e=400;this.isOpen&&(i.classList.contains("modal__close")||i.classList.contains("modal__bg")||i.classList.contains("mdl-button__ripple-container")&&i.parentElement.classList.contains("modal__close"))&&(t.preventDefault(),t.stopImmediatePropagation(),this.div.style.opacity="1",this.div.removeAttribute("style"),this.trigger.style.transform="none",this.trigger.style.webkitTransform="none",this.trigger.classList.remove("modal__trigger--active"),this.modal.classList.remove("modal--active"),this.content.classList.remove("modal__content--active"),this.div.addEventListener("transitionend",function(){setTimeout(function(){window.requestAnimationFrame(function(){this.div.remove()}.bind(this))}.bind(this),e-50)}.bind(this),!1),this.isOpen=!1)},this.open=function(t){t.preventDefault();var i=function(){null===document.getElementById("modal__temp")&&(this.div=document.createElement("div"),this.div.id="modal__temp",this.trigger.appendChild(this.div),this.div.style.backgroundColor=window.getComputedStyle(this.trigger).backgroundColor,e())}.bind(this),e=function(){var t,i,e,s,n=this.trigger.getBoundingClientRect(),o=this.modal.querySelector(".modal__content").getBoundingClientRect(),a=window.innerWidth/2,r=window.innerHeight/2;this.trigger.classList.add("modal__trigger--active"),e=o.width/n.width,s=o.height/n.height,e=e.toFixed(3),s=s.toFixed(3),t=Math.round(a-n.left-n.width/2),i=Math.round(r-n.top-n.height/2),this.modal.classList.contains("modal--align-top")&&(i=Math.round(o.height/2+o.top-n.top-n.height/2)),this.trigger.style.transform="translate("+t+"px, "+i+"px)",this.trigger.style.webkitTransform="translate("+t+"px, "+i+"px)",this.div.style.backgroundColor="#fff",this.div.style.transform="scale("+e+","+s+")",this.div.style.webkitTransform="scale("+e+","+s+")",window.setTimeout(function(){window.requestAnimationFrame(function(){d()}.bind(this))}.bind(this),400)}.bind(this),d=function(){if(!this.isOpen){var t=this.modal.querySelector(".modal__content");this.modal.classList.add("modal--active"),t.classList.add("modal__content--active"),t.addEventListener("transitionend",s.bind(this),!1),this.isOpen=!0}}.bind(this),s=function(){this.div.style.opacity="0",this.content.removeEventListener("transitionend",s.bind(this),!1)}.bind(this);i()},this.initModal()},triggers=document.querySelectorAll(".modal__trigger"),modals=[],j=0;j<triggers.length;j++)new MaterialModal(triggers[j]);